# üéØ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "–ù–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ"

## üìã –°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

–ù–∞ **localhost** –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:
```
Browser ‚Üí localhost:3000 (Next.js) 
  ‚Üí rewrites ‚Üí localhost:4000 (Express)
```

–ù–∞ **s7robotics.space** –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:
```
Browser ‚Üí s7robotics.space (Next.js) 
  ‚Üí rewrites –ù–ï –†–ê–ë–û–¢–ê–Æ–¢ –≤ production 
  ‚Üí –∑–∞–ø—Ä–æ—Å—ã –∫ /api/* —É—Ö–æ–¥—è—Ç –≤ –Ω–∏–∫—É–¥–∞
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–ó–∞–≥—Ä—É–∑–∫–∞..." –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è.

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –û–±–Ω–æ–≤–ª—ë–Ω `lib/api.ts`
–¢–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `NEXT_PUBLIC_API_URL`:
```typescript
// –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ NEXT_PUBLIC_API_URL, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë
// –ò–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ (–¥–ª—è dev —Å rewrites)
const apiUrl = process.env.NEXT_PUBLIC_API_URL || ''
const fullPath = apiUrl ? `${apiUrl}${path}` : path
```

### 2. –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| **SERVER-CHECKLIST.md** | –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (5 –º–∏–Ω—É—Ç) |
| **QUICK-FIX.md** | –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º—ã |
| **DEPLOYMENT.md** | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é |
| **nginx.conf.example** | –ì–æ—Ç–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥ nginx –¥–ª—è –∫–æ–ø–∏–ø–∞—Å—Ç—ã |
| **setup-production.sh** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —á–∏—Å—Ç—ã–π —Å–µ—Ä–≤–µ—Ä |
| **update.sh** | –°–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ |
| **check-api.html** | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ API (–æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ) |
| **README.MD** | –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ |

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (s7robotics.space):

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (5 –º–∏–Ω—É—Ç)**
```bash
ssh user@s7robotics.space
cd /path/to/s7-new
git pull

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å nginx
sudo cp nginx.conf.example /etc/nginx/sites-available/s7robotics.space
sudo ln -sf /etc/nginx/sites-available/s7robotics.space /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
curl https://s7robotics.space/api/health
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (10 –º–∏–Ω—É—Ç)**
```bash
ssh user@s7robotics.space
cd /path/to/s7-new
git pull
bash setup-production.sh
# –ó–∞—Ç–µ–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å nginx –∫–∞–∫ –≤ –≤–∞—Ä–∏–∞–Ω—Ç–µ –ê
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   ```
   https://s7robotics.space/check-api.html
   ```
   –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã" ‚Üí –≤—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å ‚úÖ

2. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç:
   ```
   https://s7robotics.space/dashboard
   ```
   –î–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –¥–∞—à–±–æ—Ä–¥, –∞ –ù–ï "–ó–∞–≥—Ä—É–∑–∫–∞..."

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: Nginx Proxy (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ backend:
```nginx
# Frontend
location / {
    proxy_pass http://localhost:3000;
}

# Backend API
location /api/ {
    proxy_pass http://localhost:4000/api/;
}
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ‚úÖ –û–¥–Ω–æ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –¥–ª—è –≤—Å–µ–≥–æ
- ‚úÖ –õ–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SSL
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ nginx

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞—Ç—å `.env.production`:
```env
NEXT_PUBLIC_API_URL=https://api.s7robotics.space
```

**–ü–ª—é—Å—ã:**
- ‚úÖ Backend –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –¥–æ–º–µ–Ω–µ
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ù—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–º–µ–Ω/–ø–æ–¥–¥–æ–º–µ–Ω –¥–ª—è API
- ‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS
- ‚ùå –î–≤–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–¥–æ –∏ –ø–æ—Å–ª–µ)

### ‚ùå –î–û (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ –Ω–∞ production):
```
Browser
  ‚Üì
Nginx ‚Üí Next.js (localhost:3000)
  ‚Üì rewrites –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ production
  ‚úó /api/* –∑–∞–ø—Ä–æ—Å—ã —É—Ö–æ–¥—è—Ç –≤ –Ω–∏–∫—É–¥–∞
  
Express (localhost:4000) - –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
```

### ‚úÖ –ü–û–°–õ–ï (—Ä–∞–±–æ—Ç–∞–µ—Ç):
```
Browser
  ‚Üì
Nginx
  ‚îú‚îÄ / ‚Üí Next.js (localhost:3000) ‚úì
  ‚îî‚îÄ /api/* ‚Üí Express (localhost:4000) ‚úì
```

## üéì –ß—Ç–æ –±—ã–ª–æ –∏–∑—É—á–µ–Ω–æ

1. **Next.js rewrites** —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ dev-—Ä–µ–∂–∏–º–µ –∫–∞–∫ –ø—Ä–æ–∫—Å–∏
2. –í production rewrites - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ URL rewriting, –∞ –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ
3. –î–ª—è production –Ω—É–∂–µ–Ω —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ (nginx) –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. `NEXT_PUBLIC_*` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[SERVER-CHECKLIST.md](./SERVER-CHECKLIST.md)** - –ù–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞! ‚≠ê
- **[QUICK-FIX.md](./QUICK-FIX.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- **[DEPLOYMENT.md](./DEPLOYMENT.md)** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[README.MD](./README.MD)** - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ

## üêõ –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω: `pm2 list`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs s7-backend`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ nginx: `sudo nginx -t`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health: `curl http://localhost:4000/api/health`
5. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫–∏

## üìû –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:** `git pull`
2. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ nginx** –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ
3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ **–ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:** `sudo certbot --nginx -d s7robotics.space`
5. üéâ **–ì–æ—Ç–æ–≤–æ!** –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç–∫—Ä–æ–π—Ç–µ:
- https://s7robotics.space - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- https://s7robotics.space/dashboard - –¥–∞—à–±–æ—Ä–¥
- https://s7robotics.space/check-api.html - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ API
- https://s7robotics.space/api/health - health check

---

**–°–æ–∑–¥–∞–Ω–æ:** $(date)  
**–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é  
**–í—Ä–µ–º—è —Ä–µ—à–µ–Ω–∏—è:** ~5-10 –º–∏–Ω—É—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
